(dp1
S'output'
p2
S"<class 'sqlite3.OperationalError'> database is locked"
p3
sS'layer'
p4
S'/home/sourav/Documents/Project_OJ/Redefined/applications/oj/controllers/default.py'
p5
sS'code'
p6
S'import os\nimport json\ndef index():\n    """\n    example action using the internationalization operator T and flash\n    rendered by views/default/index.html or views/generic.html\n\n    if you need a simple wiki simply replace the two lines below with:\n    return auth.wiki()\n    """\n    return dict(message=T(\'Welcome to web2py!\'))\n\n\ndef user():\n    return dict(form=auth())\n\n\n@cache.action()\ndef download():\n    return response.download(request, db)\n\n\ndef call():\n    return service()\n\ndef problem_upload():\n    form=SQLFORM(db.problems)\n    form.process()\n    return dict(form=form)\n\n@auth.requires_login()\ndef submit() :\n    pid=request.args[0]\n    form=SQLFORM.factory(\n        Field(\'language\',requires=IS_IN_SET([\'C\', \'CPP\', \'Java\'])),\n        Field(\'Upload_code\',\'upload\',uploadfolder=os.path.join(request.folder,\'uploads\'))\n    )\n    if form.process().accepted:\n        # sid=db.livesubm.insert(uid=auth.user_id,pid=pid,lang=str(form.vars.language),status="Queued",filename=form.vars.Upload_code)\n        sid = scheduler.queue_task(\'check_submission\', pvars={\'uid\':auth.user_id, \'pid\':pid,\'language\':form.vars.language,\'filename\':form.vars.Upload_code},immediate=True).id\n        redirect(URL(\'default\',status,args=sid))\n\n    elif form.errors:\n        response.flash = \'form has errors\'\n    return dict(form=form)\n\ndef status():\n    sid=request.args[0]\n    # aa=db.livesubm.insert(pid=1,uid=1,lang="fdas",status="11",score=10,time="fda",memory="Fdas")# record=db.livesubm[aa]\n    return locals()\n\ndef statusajax():\n    sub_id=request.vars[\'sid\']\n    schd_stat=scheduler.task_status(int(sub_id),output=True)\n    result={}\n    if schd_stat.scheduler_task.status == "COMPLETED":\n        result[\'status\']=\'DONE\'\n        info=db(db.livesubm.sid==sub_id).select()\n        if(len(info)==1):\n            result[\'result\']=info[0].status\n            if(info[0].time != None):\n                result[\'time\']=info[0].time\n            if(info[0].memory!=None):\n                result[\'memory\']=info[0].memory\n\n    elif schd_stat.scheduler_task.status == "FAILED":\n        result[\'status\']=\'FAILED\'\n    else:\n        result[\'status\']="RUNNING"\n    return json.dumps(result)\n\ndef problem():\n    pid=request.args[0]\n    form=SQLFORM.factory(\n        Field(\'language\',requires=IS_IN_SET([\'C\', \'CPP\', \'Java\'])),\n        Field(\'Upload_code\',\'upload\',uploadfolder=os.path.join(request.folder,\'uploads\')),\n        # formstyle="bootstrap3_stacked"\n    )\n    if form.process().accepted:\n        # sid=db.livesubm.insert(uid=auth.user_id,pid=pid,lang=str(form.vars.language),status="Queued",filename=form.vars.Upload_code)\n        sid = scheduler.queue_task(\'check_submission\', pvars={\'uid\':auth.user_id, \'pid\':pid,\'language\':form.vars.language,\'filename\':form.vars.Upload_code},immediate=True).id\n        redirect(URL(\'default\',status,args=sid))\n\n    elif form.errors:\n        response.flash = \'form has errors\'\n    problem=db.problems(pid)\n    return dict(problems=problem,form=form)\n\nresponse._vars=response._caller(statusajax)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/home/sourav/Documents/Project_OJ/Redefined/applications/oj/controllers/default.py", line 89, in <module>\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/globals.py", line 412, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/sourav/Documents/Project_OJ/Redefined/applications/oj/controllers/default.py", line 58, in statusajax\n    info=db(db.livesubm.sid==sub_id).select()\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/objects.py", line 2025, in select\n    return adapter.select(self.query,fields,attributes)\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/adapters/sqlite.py", line 124, in select\n    return super(SQLiteAdapter, self).select(query, fields, attributes)\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/adapters/base.py", line 1293, in select\n    return self._select_aux(sql,fields,attributes)\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/adapters/base.py", line 1250, in _select_aux\n    self.execute(sql)\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/adapters/base.py", line 1385, in execute\n    return self.log_execute(*a, **b)\n  File "/home/sourav/Documents/Project_OJ/Redefined/gluon/packages/dal/pydal/adapters/base.py", line 1379, in log_execute\n    ret = self.get_cursor().execute(command, *a[1:], **b)\nOperationalError: database is locked\n'
p11
s.